#set($userId = $ctx.identity.sub)

## Check if user has access to the workspace
{
    "version": "2018-05-29",
    "operation": "Query",
    "index": "UserWorkspaceIndex",
    "query": {
        "expression": "user_id = :userId AND workspace_id = :workspaceId",
        "expressionValues": {
            ":userId": $util.dynamodb.toDynamoDBJson($userId),
            ":workspaceId": $util.dynamodb.toDynamoDBJson($ctx.args.id)
        }
    }
}

$util.qr($ctx.stash.put("workspaceId", $ctx.args.id))
